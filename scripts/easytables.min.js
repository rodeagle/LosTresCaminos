import css_service from"/inject-css.min.js";let dynamicTemplate='\n    <div class="dynamic-table-desktop">\n        <div class="tb {{#if bordered}}  {{else}}  {{/if}}">\n            <div class="row no-gutters">\n                {{#each headers}}\n                    {{#unless hidden}}\n                        <div class="col col-{{col}} p-1 header-cell {{class}} {{desktopClass}} {{headerClass}} {{#if headerInvisible}} hidden-handlebars-item {{/if}} {{#if hiddenInput}}hidden-handlebars-item{{/if}}" {{#if filter}} filter="{{filter}}"{{/if}}>{{name}}</div>\n                    {{/unless}}\n                {{/each}}\n            </div>\n            {{#each rows}}\n                <div class="row no-gutters {{NthOpt ../this @index}} dt-row">\n                    {{#each ../headers}}\n                        <input type="hidden" name="{{getValueName ../this @index}}" value="{{getValue ../this @index}}">\n                        {{#unless hidden}}\n                        <div class="col col-{{col}} {{#if rowClass}}{{rowClass}}{{else}}p-1{{/if}} {{class}} {{desktopClass}}" title="{{{title}}}" {{#if data}} data-{{data}}="{{GetItemByName ../this data}}" {{/if}}>{{#if isHTML}}{{{getValue ../this @index}}}{{else if isArray}}{{{buildArray (getValue ../this @index)}}}{{else if template}}{{{template}}}{{else}}{{getValue ../this @index}}{{/if}}</div>\n                        {{/unless}}\n                    {{/each}}\n                </div>\n            {{/each}}\n        </div>\n    </div>\n    <div class="dynamic-table-mobile structure" {{#if maxheight}} style="max-height:{{maxheight}}" {{else}} style="max-height:300px" {{/if}}>\n        <div class="tb  {{#if bordered}}  {{else}}  {{/if}}">\n                {{#if (eq MobileRenderMode \'OneHeader\')}}\n                {{#each headers}}\n                <div class="row no-gutters dt-row">\n                    <div class="col-12 {{class}} {{headerClass}} header-cell bg-light {{NthOpt ../this @index}} {{#if headerInvisible}} hidden-handlebars-item{{/if}}">{{name}}</div>\n                    {{#each ../rows}}\n                        {{#if hiddenInput}}\n                            <input type="hidden" name="{{getValueName this @../index}}" value="{{getValue this @../index}}"/>\n                        {{else}}\n                            <div class="col-12 {{../class}} {{../rowClass}} {{../mobileClass}} {{NthOpt ../../this @index}}" title="{{../title}}" {{#if ../data}} data-{{ ../data}}="{{GetItemByName this ../data}}" {{/if}}>{{#if ../isHTML}}{{{getValue this @../index}}}{{else if isArray}}{{{buildArray (getValue ../this @index)}}}{{else if template}}{{{template}}}{{else}}{{getValue this @../index}}{{/if}}</div>\n                        {{/if}}\n                    {{/each}}\n                </div>\n                {{/each}}\n                {{/if}}\n                {{#if (eq MobileRenderMode \'PairRender\')}}\n                {{#each rows}}\n                {{#each ../headers}}\n                {{#if (returnIfEvenNumber true @../index)}}\n                {{#if (getValue ../this @index)}}\n                <div {{#unless NoNthOptInMobile}} class="{{NthOpt ../../this @index}}" {{/unless}}>\n                    {{#if hiddenInput}}\n                        <input type="hidden" name="{{getValueName this @../index}}" value="{{getValue this @../index}}"/>\n                    {{else}}\n                        <div class="col-12 {{class}} {{rowClass}} {{mobileClass}} {{../../OnEvenClass}}" title="{{title}}" {{#if data}} data-{{data}}="{{GetItemByName this data}}" {{/if}}>{{#if isHTML}}{{{getValue this @../index}}}{{else if isArray}}{{{buildArray (getValue ../this @index)}}}{{else if template}}{{{template}}}{{else}}{{getValue ../this @index}}{{/if}}</div>\n                    {{/if}}\n                </div>\n                {{/if}}\n                {{#if (getValue (GetItemByName ../../rows (_add1 @../index)) @index)}}\n                <div {{#unless NoNthOptInMobile}} class="{{NthOpt ../../this (_add1 @index)}}" {{/unless}}>\n                    {{#if hiddenInput}}\n                        <input type="hidden" name="{{getValueName ../../rows (_add1 @../index)}}" value="{{getValue ../../rows (_add1 @../index)}}""/>\n                    {{else}}\n                        <div class="col-12 {{class}}" title="{{title}}" {{#if data}} data-{{data}}="{{GetItemByName this data}}" {{/if}}><div class="{{rowClass}} {{mobileClass}} {{../../OnUnEvenClass}}">{{#if isHTML}}{{{getValue (GetItemByName ../../rows (_add1 @../index)) @index}}}{{else if isArray}}{{{buildArray (getValue (GetItemByName ../../rows (_add1 @../index)) @index)}}}{{else if template}}{{{template}}}{{else}}{{getValue (GetItemByName ../../rows (_add1 @../index)) @index}}{{/if}}</div></div>\n                    {{/if}}\n                </div>\n                {{/if}}\n                {{/if}}\n                {{/each}}\n                {{/each}}\n                {{/if}}\n                {{#if (eq MobileRenderMode \'Normal\')}}\n                {{#each rows}}\n                <div class=\'dt-row\'>\n                {{#each ../headers}}\n                <div class="row no-gutters {{returnIfUnEvenNumber \'bg-light\' @../index}} {{NthOpt ../this @../index}}">\n                    <input type="hidden" name="{{getValueName ../this @index}}" value="{{getValue ../this @index}}"/>\n                    {{#unless hidden}}\n                    <div class="col col-6 header-cell {{class}} {{headerClass}} {{#if headerInvisible}} hidden-handlebars-item{{/if}} {{#if hiddenInput}}hidden-handlebars-item{{/if}}" {{#if filter}}filter="{{filter}}"{{/if}}>{{name}}</div>\n                    <div class="col {{#if headerInvisible}}col-12{{else}}col-6{{/if}} {{class}} {{rowClass}} {{mobileClass}}" title="{{title}}" {{#if data}} data-{{data}}="{{GetItemByName ../this data}}" {{/if}}>{{#if isHTML}}{{{getValue ../this @index}}}{{else if isArray}}{{{buildArray (getValue ../this @index)}}}{{else if template}}{{{template}}}{{else}}{{getValue ../this @index}}{{/if}}</div>\n                    {{/unless}}\n                </div>\n                {{/each}}\n                </div>\n                {{/each}}\n                {{/if}}\n        </div>\n    </div>\n',dynamicStyleTemplate='\n    .margin-30 {\n    margin-left: 30px;\n    margin-right: 30px; }\n\n    .hidden-handlebars-item {\n    display: none !important;\n    visibility: hidden; }\n\n\n    @media only screen {\n    .dynamic-table-mobile.structure {\n    overflow-x: hidden;\n    overflow-y: scroll; }\n    .dynamic-table-mobile .row th, .dynamic-table-mobile .row td {\n    padding-left: 10px;\n    overflow-wrap: break-word; }\n    .dynamic-table-mobile .row th, .dynamic-table-mobile .row td {\n    padding-left: 20px;\n    overflow-wrap: break-word; } }\n\n\n        .dynamic-table-desktop {\n        display: none;\n        visibility: hidden; }\n\n\n    @media (min-width: 720px) {\n    .dynamic-table-mobile {\n    display: none; }\n    .dynamic-table-desktop {\n    display: block;\n    visibility: visible; } }\n\n\n    [filter]{\n        cursor: pointer;\n    }\n\n\n    .asc[filter]:after {\n        padding-left:3px;\n        content: "⇩";\n    }\n\n\n    .desc[filter]:after {\n        padding-left: 3px;\n        content: "⇧";\n    }\n\n    .tb .row:not(.isarray) > .col {\n        border-left:1px solid #DEE2E6;\n    }\n    .tb .row:not(.isarray) .col:last-of-type {\n        border-right:1px solid #DEE2E6;\n    }\n\n    .tb .row:not(.isarray) {\n        border-top:1px solid #DEE2E6;\n    }\n\n    .tb .row:last-child:not(.isarray) {\n        border-bottom:1px solid #DEE2E6;\n    }\n\n    .tb .header-cell{\n        font-weight:bold;\n    }\n';function Init(){css_service.Append(dynamicStyleTemplate,{}),Handlebars.registerHelper("getValue",function(prop,i){var x=0;for(var p in prop){if(x==i)return prop[p];x++}}),Handlebars.registerHelper("getValueName",function(prop,i){return Object.keys(prop)[i]}),Handlebars.registerHelper("PrintValues",function(x1){x1&&console.log(x1)}),Handlebars.registerHelper("_add1",function(param){return param+1}),Handlebars.registerHelper("eq",function(v1,v2){return v1==v2}),Handlebars.registerHelper("neq",function(v1,v2){return v1!=v2}),Handlebars.registerHelper("returnIfEvenNumber",function(value,i){return i%2==0?value:null}),Handlebars.registerHelper("returnIfUnEvenNumber",function(value,i){return i%2!=0?value:null}),Handlebars.registerHelper("GetItemByName",function(array,value){return array[value]}),Handlebars.registerHelper("IfNot",function(value){return null==value||null==value||"boolean"==typeof value&&!value}),Handlebars.registerHelper("NthOpt",function(array,index){let ind=""+index,nthopt=array.NthOpt,res;return void 0===nthopt?"":nthopt[ind]||""}),Handlebars.registerHelper("buildArray",function(array){let html="";return array.forEach(function(element){let row=element.row,_alignment=element.alignment||"center",_class=element.class||"col",string="<div class='row margin-0 no-gutters isarray'>",textalign="text-"+_alignment;row.forEach(function(item){var hasblank;""===item&&(item=""),string+=`<div class='${textalign} ${_class}'>${item}</div>`}),html+=string+="</div>"}),html})}Init();var _properties={headers:[{}],rows:[],bordered:!0,MobileRenderMode:"Normal",NoNthOptInMobile:!1};function MapHtmlToJson($row){return $row.find("input:hidden").serializeArray().map(function(x){let json=[];return json[x.name]=x.value,json}).reduce(function(x,y){return $.extend({},x,y)},{})}function RecompileNestedTemplates(container){let rows;$(container).find(".dt-row").each(function(){let newProperties=MapHtmlToJson($(this)),source=$(this).html(),template,html=Handlebars.compile(source)(newProperties);$(this).html(html)})}export default{CreateTable:function(container,properties){var newProperties=$.extend({},_properties,properties);let source=dynamicTemplate,template,html=Handlebars.compile(source)(newProperties);return $(container).html(html),RecompileNestedTemplates(container),$(container)}};